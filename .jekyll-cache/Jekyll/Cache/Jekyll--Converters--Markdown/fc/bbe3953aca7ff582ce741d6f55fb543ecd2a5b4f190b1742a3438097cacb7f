I"¯≤<p>These days I was preparing the <a href="https://arquisoft.github.io/">Software Architecture</a> course that we will be starting in a few weeks. So, I decided to create a small to-do list app with React and Solid to get in touch with these technologies that we will be using in the course. While I was making the prototype I realised that this prototype alongside the creation process could be a very interesting starting guide for my students and also for everyone that would like to start seeing a small example working. The app consist of a small web interface with and input box, a list of tasks and two button to manage Solid persistence. The final look can be seen in the image below.</p>

<p><img src="https://herminiogarcia.com/images/todo-list-overview.png" alt="To-do list app interface overview" /></p>

<h2 id="requirements">Requirements</h2>
<p>So, first of all, let‚Äôs see what the requirements are for this application:</p>
<ol>
  <li>A user should be able to insert a new task.</li>
  <li>A user should be able to see the inserted tasks.</li>
  <li>A user should be able to remove a task.</li>
  <li>A user should be able to login into his/her Solid POD.</li>
  <li>A user should be able to save inserted task into his/her Solid POD.</li>
  <li>A user should be able to recover the persisted tasks from his/her Solid POD.</li>
</ol>

<h2 id="prerequisites">Prerequisites</h2>
<p>Although this tutorial is intended as an introductory text, there are some things that you need to check/know to follow:</p>
<ul>
  <li>Javascript knowledge (preferably in its version 6).</li>
  <li>A Solid POD. You can get one from a provider or just install your own one (see <a href="https://solid.inrupt.com/get-a-solid-pod">https://solid.inrupt.com/get-a-solid-pod</a>).</li>
  <li>NPM installed.</li>
</ul>

<h2 id="building-react-components-without-persistence">Building React components without persistence</h2>
<p>I am going to divide this tutorial in two parts: the creation of the React component and the inclusion of the persistence logic with Solid inside the React component. This way, we avoid to mix concepts and the understading and development process are made easier.</p>

<p>The first step is to create a React project with the <a href="https://reactjs.org/docs/create-a-new-react-app.html#create-react-app">Create React App</a> which will create a working skeleton for us. Open your favorite terminal and type the following commands:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npx create-react-app todo-list
cd todo-list
npm start
</code></pre></div></div>

<p>You will have created a minimal application in React with a welcome page. For now on, we will be creating the React components for our to-do list app. If this notion of components sound weird to you I encourage you to follow first the <a href="https://reactjs.org/tutorial/tutorial.html">React tutorial</a> which will give you the basic notions of React.</p>

<p>So, let‚Äôs go, open the <code class="language-plaintext highlighter-rouge">App.js</code> file located in <code class="language-plaintext highlighter-rouge">src</code> directory. We are going to change the <code class="language-plaintext highlighter-rouge">App</code> function component to render our own app. We change the <code class="language-plaintext highlighter-rouge">h1</code> title and include a reference to our future main component <code class="language-plaintext highlighter-rouge">TodoList</code>. See the code below:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">App</span><span class="dl">"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">header</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">ToDo</span> <span class="nx">List</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/header</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">TodoList</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">App</code> function component will call the <code class="language-plaintext highlighter-rouge">TodoList</code> to render its content. Therefore, here, we must think about what concerns should be included in this component. It is common in React to take up the state of a child to the parent. So the parent can take control over the state and pass to all its childrens. In this example, we will be following this phylosophy and declare the tasks in the <code class="language-plaintext highlighter-rouge">TodoList</code> component constructor. Apart from this, we want to render an input box to add new tasks and a the list of tasks that we have added. If you take a look to the code below you will see that we have declared a constructor which initialises the state with an empty Array of tasks. In the render function we added a <code class="language-plaintext highlighter-rouge">div</code> tag with two component calls: <code class="language-plaintext highlighter-rouge">InputTask</code> and <code class="language-plaintext highlighter-rouge">TaskList</code> which will render the input text area and the list of tasks that we will add.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">TodoList</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">tasks</span><span class="p">:</span> <span class="p">[],</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">App-content</span><span class="dl">"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">InputTask</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nx">TaskList</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Therefore, now it is turn for the <code class="language-plaintext highlighter-rouge">InputTask</code> and <code class="language-plaintext highlighter-rouge">TaskList</code> components. These two components will render the text area where the user can input its tasks and the list of persisted task, respectively. So the skeleton code (without event handling) for the <code class="language-plaintext highlighter-rouge">InputTask</code> can be seen in the snippet below. The <code class="language-plaintext highlighter-rouge">InputTask</code> defines a constructor with an attribute in its state, this is the value of the input box. As you can see this value is taken in the render function to show the current value. However, the changes with this code are not actually reflected in the app (we will see how to do that later). The rest of the code is a submit button which will handle the addition of new tasks.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">InputTask</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">value</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">form</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">text</span><span class="dl">"</span> <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">task</span><span class="dl">"</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">value</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">submit</span><span class="dl">"</span> <span class="nx">value</span><span class="o">=</span><span class="dl">"</span><span class="s2">+</span><span class="dl">"</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="sr">/form</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span> 
<span class="p">}</span>
</code></pre></div></div>

<p>In the case of the <code class="language-plaintext highlighter-rouge">TaskList</code> component we make use of a functional component because we are only going to render a view. In this case we will receive a list of tasks in the props object (later we will see how this is done) and iterator over it to produce a list of values. Next to each value we will render a button which will serve to delete the current task.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">TaskList</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="nx">props</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">li</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">t</span><span class="p">}</span><span class="o">&gt;</span>
          <span class="p">{</span><span class="nx">t</span><span class="p">}</span><span class="o">&lt;</span><span class="nx">button</span><span class="o">&gt;-&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/li</span><span class="err">&gt;
</span>      <span class="p">);</span>
    <span class="p">})</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="handling-state-and-events">Handling state and events</h3>
<p>As we saw earlier, it is common in React that the parent manages the state of its children components. Therefore, we are going to delegate this reponsability to the <code class="language-plaintext highlighter-rouge">TodoList</code> component. To achieve this, we are going to define two functions: one to add new tasks (<code class="language-plaintext highlighter-rouge">handleNewTasks</code>) and other to delete a task (<code class="language-plaintext highlighter-rouge">handleDeleteTask</code>). The code can be seen in the snippet below. One particularity of these functions is that both of them make a copy of the state in order to change making use of <a href="https://reactjs.org/tutorial/tutorial.html#why-immutability-is-important">React inmutability guideline</a>. Then this two functions are passed to the <code class="language-plaintext highlighter-rouge">InputTask</code> and <code class="language-plaintext highlighter-rouge">TodoList</code> components via their props objects.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">TodoList</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">tasks</span><span class="p">:</span> <span class="p">[],</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">handleNewTask</span><span class="p">(</span><span class="nx">task</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">task</span> <span class="o">===</span> <span class="dl">""</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Empty task not allowed!</span><span class="dl">"</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">const</span> <span class="nx">tasks</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">task</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">tasks</span><span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">handleDeleteTask</span><span class="p">(</span><span class="nx">task</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">tasks</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
    <span class="nx">tasks</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">task</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">tasks</span><span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">App-content</span><span class="dl">"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">InputTask</span> <span class="nx">addNewTask</span><span class="o">=</span><span class="p">{(</span><span class="nx">task</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleNewTask</span><span class="p">(</span><span class="nx">task</span><span class="p">)}</span><span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">TaskList</span> <span class="nx">tasks</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">tasks</span><span class="p">}</span> <span class="nx">deleteTask</span><span class="o">=</span><span class="p">{(</span><span class="nx">task</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleDeleteTask</span><span class="p">(</span><span class="nx">task</span><span class="p">)}</span><span class="sr">/</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Now that we have passed the two functions to handle the state of the tasks, we must call them inside each component. In the case of the <code class="language-plaintext highlighter-rouge">InputTask</code> component we want that every change that is performed in the text input is reflected in the state of the component. This is performed using the <code class="language-plaintext highlighter-rouge">onChange</code> event of the <code class="language-plaintext highlighter-rouge">input</code> tag. Whenever this event is fired we want to change the inner state. Therefore, we define the <code class="language-plaintext highlighter-rouge">handleChange</code> function that will update the state with the value of the input area. However, we also want to propagate this value to the parent component (<code class="language-plaintext highlighter-rouge">TodoList</code>). Therefore, when the user fires the submit event we must send this information upper component. This is achieved through the <code class="language-plaintext highlighter-rouge">handleSubmit</code> function that will call the passed function <code class="language-plaintext highlighter-rouge">addNewTask</code>. In the code below you can see this process implemented. Note that the <code class="language-plaintext highlighter-rouge">e.preventDefault()</code> call in the <code class="language-plaintext highlighter-rouge">handleSubmit</code> function prevents the browser to send the <code class="language-plaintext highlighter-rouge">POST</code> request to the server. Moreover, the <code class="language-plaintext highlighter-rouge">this</code> context must be binded in both functions because otherwhise the application will not be able to resolve the <code class="language-plaintext highlighter-rouge">this</code> reference when calling form the event source.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">InputTask</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">value</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleSubmit</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleSubmit</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">handleChange</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="na">value</span><span class="p">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">handleSubmit</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">addNewTask</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">form</span> <span class="nx">onSubmit</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleSubmit</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">text</span><span class="dl">"</span> <span class="nx">name</span><span class="o">=</span><span class="dl">"</span><span class="s2">task</span><span class="dl">"</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">value</span><span class="p">}</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">submit</span><span class="dl">"</span> <span class="nx">value</span><span class="o">=</span><span class="dl">"</span><span class="s2">+</span><span class="dl">"</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="sr">/form</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>In the case of <code class="language-plaintext highlighter-rouge">TaskList</code> component, we only have to handle the deletion process. Thus, we will link the <code class="language-plaintext highlighter-rouge">onClick</code> event with the <code class="language-plaintext highlighter-rouge">deleteTask</code> function. See the code below.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">TaskList</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="nx">props</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">t</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">li</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">t</span><span class="p">}</span><span class="o">&gt;</span>
          <span class="p">{</span><span class="nx">t</span><span class="p">}</span><span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">props</span><span class="p">.</span><span class="nx">deleteTask</span><span class="p">(</span><span class="nx">t</span><span class="p">)}</span><span class="o">&gt;-&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/li</span><span class="err">&gt;
</span>      <span class="p">);</span>
    <span class="p">})</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>At this point, we should have the application running correctly but without Solid persistence. From now on, we will see how to include persistence functions using the Solid ecosystem for this purpouse.</p>

<h2 id="including-solid">Including Solid</h2>
<p>First of all, we need to include two libraries to our project: <a href="https://github.com/solid/solid-auth-client">solid-auth-client</a> and <a href="https://github.com/solid/query-ldflex">solid-query-ldflex</a>. Solid-auth-client helps us to login into a Solid POD and solid-query-ldflex encapsulates the access to the RDF resources.</p>

<p>RDF what? Well, don‚Äôt be afraid. RDF stands for Resources Definition Framework and it is a specification used to model data in graphs. It is used in the Semantic Web community as one of the foundations technologies and it is used in Solid to persist data. However, it is not essential for you to be an expert on this topic to complete this tutorial. This is the reason why we are using the solid-query-ldflex library which encapsulates the handling of these graphs.</p>

<p>So, we need two functions to handle the persistence, one to save and one to query, <code class="language-plaintext highlighter-rouge">saveSolidTasks</code> and <code class="language-plaintext highlighter-rouge">loadSolidTasks</code>, respectively. In the code below we have the two functions plus the <code class="language-plaintext highlighter-rouge">getCurrentSession</code> function which handles the login from Solid (using the solid-auth-library). The <code class="language-plaintext highlighter-rouge">getCurrentSession</code> will display a popup to request the Solid provider and the credentials. The <code class="language-plaintext highlighter-rouge">saveSolidTasks</code> function firstly removes the old tasks persisted in the user Solid POD and then adds the new ones. Notice that we are using the <code class="language-plaintext highlighter-rouge">todo/todo.ttl#todo</code> path which will create a directory called ‚Äútodo‚Äù and a file inside it called ‚Äútodo.ttl‚Äù. The ‚Äú#todo‚Äù will select the ‚Äútodo‚Äù subject inside the RDF file. In the case of the <code class="language-plaintext highlighter-rouge">loadSolidTasks</code> function it we will query the content of the <code class="language-plaintext highlighter-rouge">schema:itemListElement</code> predicate. This is the same as applying the SPARQL query in the snippet below.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">loadSolidTasks</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">session</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getCurrentSession</span><span class="p">();</span>
  <span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">session</span><span class="p">.</span><span class="nx">webId</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">profile/card#me</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">todo/todo.ttl#todo</span><span class="dl">"</span><span class="p">);</span>
  <span class="kd">let</span> <span class="nx">todo</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">url</span><span class="p">];</span>
  <span class="kd">const</span> <span class="nx">tasks</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">for</span> <span class="k">await</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">task</span> <span class="k">of</span> <span class="nx">todo</span><span class="p">.</span><span class="nx">schema_itemListElement</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">tasks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">task</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">values</span><span class="p">());</span>
<span class="p">}</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">saveSolidTasks</span><span class="p">(</span><span class="nx">tasks</span><span class="p">,</span> <span class="nx">oldTasks</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">session</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getCurrentSession</span><span class="p">();</span>
  <span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">session</span><span class="p">.</span><span class="nx">webId</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">profile/card#me</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">todo/todo.ttl#todo</span><span class="dl">"</span><span class="p">);</span>
  <span class="kd">let</span> <span class="nx">todo</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">url</span><span class="p">];</span>
  <span class="k">for</span><span class="p">(</span><span class="kd">const</span> <span class="nx">t</span> <span class="k">of</span> <span class="nx">oldTasks</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">todo</span><span class="p">[</span><span class="dl">"</span><span class="s2">schema:itemListElement</span><span class="dl">"</span><span class="p">].</span><span class="k">delete</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">}</span>
  <span class="k">for</span><span class="p">(</span><span class="kd">const</span> <span class="nx">t</span> <span class="k">of</span> <span class="nx">tasks</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">todo</span><span class="p">[</span><span class="dl">"</span><span class="s2">schema:itemListElement</span><span class="dl">"</span><span class="p">].</span><span class="nx">add</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">}</span>
  <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Saved to your Solid POD</span><span class="dl">"</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">getCurrentSession</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">session</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">auth</span><span class="p">.</span><span class="nx">currentSession</span><span class="p">();</span>
  <span class="kd">let</span> <span class="nx">popupUri</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://solid.community/common/popup.html</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">session</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">session</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">auth</span><span class="p">.</span><span class="nx">popupLogin</span><span class="p">({</span> <span class="nx">popupUri</span> <span class="p">});</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">session</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-sparql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">PREFIX</span><span class="w"> </span><span class="nn">:</span><span class="w"> </span><span class="nn">&lt;#&gt;</span><span class="w">
</span><span class="k">PREFIX</span><span class="w"> </span><span class="nn">schema:</span><span class="w"> </span><span class="nn">&lt;http://schema.org/&gt;</span><span class="w">

</span><span class="k">SELECT</span><span class="w"> </span><span class="nv">?o</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nn">:</span><span class="ss">todo</span><span class="w"> </span><span class="nn">schema:</span><span class="ss">itemListElement</span><span class="w"> </span><span class="nv">?o</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Now we have to connect these functions to the components. The first component to edit is the <code class="language-plaintext highlighter-rouge">TodoList</code> one which has to handle the event creation and the event deletion. In addition we need two buttons to load the items and to delete them. This implies the creation of a new component, <code class="language-plaintext highlighter-rouge">SolidStorage</code>, which renders two buttons and links their events to the handling functions in the <code class="language-plaintext highlighter-rouge">TodoList</code> component (see the code below).</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">SolidStorage</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">loadFromSolid</span><span class="p">()}</span><span class="o">&gt;</span><span class="nx">Load</span> <span class="k">from</span> <span class="nx">Solid</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">saveToSolid</span><span class="p">()}</span><span class="o">&gt;</span><span class="nx">Save</span> <span class="nx">to</span> <span class="nx">Solid</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Then, we must render this component inside the <code class="language-plaintext highlighter-rouge">render</code> function of the <code class="language-plaintext highlighter-rouge">TodoList</code> component and pass to the <code class="language-plaintext highlighter-rouge">props</code> object the two handling functions: <code class="language-plaintext highlighter-rouge">loadFromSolid</code> and <code class="language-plaintext highlighter-rouge">saveToSolid</code>. Notice that both functions are <code class="language-plaintext highlighter-rouge">async</code> (so they do not block the UI thread) and that they <code class="language-plaintext highlighter-rouge">await</code> to get the result of the <code class="language-plaintext highlighter-rouge">loadSolidTasks</code>. In the case of not awaiting it would result in strange behaviour. See the snippet below to get the full code of the <code class="language-plaintext highlighter-rouge">TodoList</code> component.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">TodoList</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">tasks</span><span class="p">:</span> <span class="p">[],</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">handleNewTask</span><span class="p">(</span><span class="nx">task</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">task</span> <span class="o">===</span> <span class="dl">""</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Empty task not allowed!</span><span class="dl">"</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">const</span> <span class="nx">tasks</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">task</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">tasks</span><span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">handleDeleteTask</span><span class="p">(</span><span class="nx">task</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">tasks</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
    <span class="nx">tasks</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">task</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">tasks</span><span class="p">});</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nx">loadFromSolid</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">tasks</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">loadSolidTasks</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="nx">tasks</span><span class="p">});</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nx">saveToSolid</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">oldTasks</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">loadSolidTasks</span><span class="p">();</span>
    <span class="nx">saveSolidTasks</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">tasks</span><span class="p">,</span> <span class="nx">oldTasks</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="dl">"</span><span class="s2">App-content</span><span class="dl">"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">InputTask</span> <span class="nx">addNewTask</span><span class="o">=</span><span class="p">{(</span><span class="nx">task</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleNewTask</span><span class="p">(</span><span class="nx">task</span><span class="p">)}</span><span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">TaskList</span> <span class="nx">tasks</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">tasks</span><span class="p">}</span> <span class="nx">deleteTask</span><span class="o">=</span><span class="p">{(</span><span class="nx">task</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleDeleteTask</span><span class="p">(</span><span class="nx">task</span><span class="p">)}</span><span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">SolidStorage</span> <span class="nx">loadFromSolid</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">loadFromSolid</span><span class="p">()}</span> <span class="nx">saveToSolid</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">saveToSolid</span><span class="p">()}</span><span class="sr">/</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>At this point you should be able to get the app running like the one <a href="https://herminiogarcia.com/solid-react-todo-list/">here</a>. With this app you should be able to manage your tasks list and use Solid as a descentralised persistence layer. Remember that you can take a look to the full code on <a href="https://github.com/herminiogg/solid-react-todo-list">Github</a>.</p>

<p>I hope you found this tutorial useful.</p>
:ET